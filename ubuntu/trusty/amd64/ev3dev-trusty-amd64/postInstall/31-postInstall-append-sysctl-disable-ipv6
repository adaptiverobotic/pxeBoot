#!/bin/bash
# -----------------------------------------------------------------------------
# 31-postInstall-append-sysctl-disable-ipv6
#
# This is one of a series of scripts that live in /root/postInstall. They are
# placed there to avoid being read by casual users and are intended to be
# executed immediately after the VM is created to set up host specific
# configuration.
#
# Copyright (C) 2014-2015 Ralph Hempel <rhempel@hempeldesigngroup.com>
#
# See LICENSE for https://github.com/rhempel/pxeBoot
# -----------------------------------------------------------------------------

. /root/postInstall/postInstall-setupvars

# -----------------------------------------------------------------------------
echo "Disable IPV6 by updating /etc/sysctl.conf"

FILE="/etc/sysctl.conf"

cat <<END-OF-FILE >> "/etc/sysctl.conf"
# -----------------------------------------------------------------------------
# Autogenerated by $0
#
# If you need to change things, consider updating the script or adding
# a custom script to your VM postInstall folder.
#
# Disable ipv6
net.ipv6.conf.all.disable_ipv6 = 1
net.ipv6.conf.default.disable_ipv6 = 1
net.ipv6.conf.lo.disable_ipv6 = 1

END-OF-FILE

# -----------------------------------------------------------------------------
